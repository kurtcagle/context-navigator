<template>
  <require from="./app.css"></require>
  <require from="./modalCustomElement"></require>
  <require from="ObjectKeysValueConverter"></require>
  <require from="SortedObjectKeysValueConverter"></require>
  <div class="container ${wait?'wait':''}">
  <div class="header">
  	  <div class="headerBlock">
	      <img src="https://thumbor.forbes.com/thumbor/960x0/https%3A%2F%2Fblogs-images.forbes.com%2Fcognitiveworld%2Ffiles%2F2019%2F01%2FYouAreHere-1.jpg" class="headerLogo link" click.trigger="fetchContext('page:_Home')"/>
	  	  <div class="button" click.trigger="goBack()" if.bind="history.length>1">Back</div>
	  	  <div class="bannerText">Semantic Navigator</div>
  	 </div>
  	 <div class="headerBlock">
	  	  <input type="search" value.bind="q" input.delegate="fetchSearch()" placeholder="Search"/>
	   	  <div class="actions">
	   	  		<select value.bind="selectedAction" change.delegate="jumpTo(selectedAction)" class="classSelector">
	   	  			<option disabled="disabled" value="">Jump to:</option>
	   	  			<option value="class:_Class">Class</option> 
	   	  			<option value="class:_Property">Property</option> 
	   	  			<option disabled="disabled" value="">──────────────────</option>
	   	  			<option repeat.for="action of instanceList['class:_Class']['rdf:type']" value.bind="action.curie">${action.label}</option>
	   	  		</select>
	   	  </div>
   	  </div>
   	  <div class="headerBlock">
   	  	<div class="button" click.trigger="login()" if.bind="!loginData.status">Log in</div>
   	  	<div class="button" click.trigger="logout()" if.bind="loginData.status">Log out</div>
   	  	<div class="button" click.trigger="launchService()">JSON</div>
		<div class="button" click.trigger="launchSeo()">SEO</div>
		<div class="button" click.trigger="pinPage()">Pin</div>
		<div class="button" click.trigger="pinPage(true)">Refresh</div>
		<div class="button" click.trigger="cache='cached'">Cache</div>

   	  </div>  	  
  </div>
  <div class="paneContainer">
  <div class="leftPane">
	<div class="byline"> </div>
	<div class="topics"> </div>
  </div>	
  <div class="centerPane">
  <div class="display">
  	  <div class="modeFrame">
  	  <div class="modeButtons">
  	  	   <div class="button ${mode==='card'?'selected':''}" click.trigger="setMode('card')">Card</div>
  	  	   <div class="button ${mode==='properties'?'selected':''}" click.trigger="setMode('properties')">Properties</div>
  	  	   <div class="button ${mode==='list'?'selected':''}" click.trigger="setMode('list')">List</div>
  	  	   <div class="button ${mode==='graph'?'selected':''}" click.trigger="setMode('graph')">Graph</div>
  	  	   <div class="button ${mode==='images'?'selected':''}" click.trigger="setMode('images')">Images</div>
<!--  	  	   <div class="button ${mode==='compliance'?'selected':''}" click.trigger="setMode('compliance')">Compliance</div> -->
<!--  	  	   <div class="button ${mode==='ingestion'?'selected':''}" click.trigger="setMode('ingestion')">Ingestion</div>-->
 	  	   <div class="button ${mode==='sparql'?'selected':''}" click.trigger="setMode('sparql')" if.bind="userRole.has('accountRole:_Sparql')">SPARQL</div>
 	  	   <div class="button ${mode==='namespaces'?'selected':''}" click.trigger="setMode('namespaces')">Namespaces</div>
 	  	   <div class="button ${mode==='search'?'selected':''}" click.trigger="setMode('search')">Search</div>
   	  </div>
      </div>


	<div class="properties"  if.bind="mode==='properties' && !cardEdit">
	  	<div class="type link" click.trigger="fetchContext(g[context]['rdf:type'][0].value,'list')">${g[g[context]['rdf:type'][0].value]['term:prefLabel'][0].value}</div>
		<div class="propertyContextLabel">${g[context]['term:prefLabel'][0].value}</div>
		<div class="buttons">
			<div class="button" click.trigger="editCardProperties()" if.bind="userRole.has('accountRole:_Edit')">Edit</div>
		</div>
		<div class="property" repeat.for="property of keys(g[context], ['rdf:type','term:prefLabel','term:hasPrimaryImageURL','term:hasDescription','vehicle:hasOptions','term:inGlossary','vehicle:hasVehicleComments', 
		'term:hasIdentifier','term:hasSearchable'])">
		  	<div class="label" title="${property}" click.trigger="fetchContext(property)"
		  	>${titleCase((g[property]['term:prefLabel'])?g[property]['term:prefLabel'][0].value:property)}:&nbsp;</div>
		  	<div class="valueBlock">
			  	<div class="value" repeat.for="item of wrapArray(g[context][property])">
			  		<span class="link" if.bind="item.type==='uri'" click.trigger="fetchContext(item.value)">${g[item.value]['term:prefLabel'][0].value}<span if.bind="!$last">,&nbsp;</span>
			  		</span>
			  		<span class="value" if.bind="item.type==='literal'" title="${item.datatype}"><span innerhtml="${displayLiteral(item)}"></span> 
			  			<span class="link" click.trigger="fetchContext(item.datatype)" if.bind="g[item.datatype]['term:prefLabel'].length > 0 ">[${g[item.datatype]["term:prefLabel"][0].value}]</span><span if.bind="!$last && $index != 0">, </span>
			  		</span>
			  	</div>
		    </div>
		  </div>
		</div>

	<div class="properties"  if.bind="mode==='properties' && cardEdit">
		<div class="propertyContextLabel">${g[context]['term:prefLabel'][0].value}</div>
		<div class="buttons">
			<div class="button" click.trigger="saveCardProperties()">Save</div>
			<div class="button" click.trigger="addProperty()">Add Property</div>
			<div class="button" click.trigger="revertCard()">Revert</div>
		</div>
		<div class="property" repeat.for="property of keys(g[context], ['rdf:type','term:prefLabel','term:hasPrimaryImageURL','term:hasDescription','vehicle:hasOptions','term:inGlossary','vehicle:hasVehicleComments', 
		'term:hasIdentifier','term:hasSearchable'])">
		  	<div class="label" title="${property}">${titleCase((g[property]['term:prefLabel'])?g[property]['term:prefLabel'][0].value:property)}:&nbsp;</div>
		  	<div class="valueBlock">
			  	<div class="value" repeat.for="item of wrapArray(g[context][property])">
			  		<div class="link" if.bind="item.type==='uri'" if.bind="linkPropertyList[property]||[]>0">
			  			<!--<select value="${item.value}" mouseover.trigger="getTerms(property)" if.bind="!item.deleted"
			  					change.delegate="updateLink(context,property,item,$event)">
			  				<option value="${item.value}" selected="selected">${item.label}</option>
			  				<option repeat.for="term of linkPropertyList[property]||[]" value.bind="term.context" if.bind="term.context != item.value">${term.value}</option>
			  			</select>-->
			  			<span class="link">${item.label}</span>
			  			<button click.trigger="deleteItem($index,g[context][property])">X</button>
			  		</div>
			  		<span class="value" if.bind="item.type==='literal' && item.datatype === 'currency:_USD'" title="${item.datatype}">
			  			$<input type="text" value.bind = "item.value"/><button click.trigger="deleteItem($index,g[context][property])">X</button>
			  		</span>
			  		<span class="value" if.bind="item.type==='literal' && item.datatype === 'xsd:dateTime'" title="${item.value}"> 
			  			<input type="text" value.bind = "item.value"/><button click.trigger="deleteItem($index,g[context][property])">X</button>
			  		</span>
			  		<div class="valueImages" if.bind="item.type==='literal' && item.datatype === 'xsd:imageURL'" title="${item.value}">
			  			<img src="${item.value}" class="imageMedium"/> 
			  			<div><input type="text" value.bind = "item.value" class="longInput"/>
			  		    <button click.trigger="deleteItem($index,g[context][property])">X</button>
			  			</div>
			  		</div>
			  		<div class="value" if.bind="item.type==='literal' && item.datatype === 'xsd:anyURI'" title="${item.value}">
			  			<div><input type="text" value.bind = "item.value" class="longInput"/>
			  		    <button click.trigger="deleteItem($index,g[context][property])">X</button>
			  			</div>
			  		</div>
			  		<span class="value" if.bind="item.type==='literal' && item.datatype.startsWith('identifier:')" title="${item.value}">
			  			<input type="text" value.bind = "item.value"/><button click.trigger="deleteItem($index,g[context][property])">X</button>
			  		</span>
			  		<span class="value" if.bind="item.type==='literal' && item.datatype.startsWith('unit:')" title="${item.value}">
			  			<input type="text" value.bind = "item.value"/><button click.trigger="deleteItem($index,g[context][property])">X</button>
			  		</span>
			  		<span class="value" if.bind="item.type==='literal' && item.datatype.startsWith('xsd:string')" title="${item.value}">
			  			<input type="text" value.bind = "item.value"/><button click.trigger="deleteItem($index,g[context][property])">X</button>
			  		</span>
			  		<span class="value" if.bind="item.type==='literal' && item.datatype.startsWith('xsd:hours')" title="${item.value}">
			  			<input type="text" value.bind = "item.value"/><button click.trigger="deleteItem($index,g[context][property])">X</button>
			  		</span>
			  		<span class="value" if.bind="item.type==='literal' && item.datatype.startsWith('xsd:integer')" title="${item.value}">
			  			<input type="number" value.bind = "item.value"/><button click.trigger="deleteItem($index,g[context][property])">X</button>
			  		</span>
			  		<span class="value" if.bind="item.type==='literal' && item.datatype.startsWith('xsd:float')" title="${item.value}">
			  			<input type="number" value.bind = "item.value"/><button click.trigger="deleteItem($index,g[context][property])">X</button>
			  		</span>
			  		<span class="value" if.bind="item.type==='literal' && item.datatype.startsWith('xsd:currency_usd')" title="${item.value}">
			  			<input type="number" value.bind = "item.value"/><button click.trigger="deleteItem($index,g[context][property])">X</button>
			  		</span>
			  		<span class="value" if.bind="item.type==='literal' && item.datatype.startsWith('xsd:htmlLiteral')" title="${item.value}">
				  		<div class="bodyEditor" innerhtml.two-way="item.value" contenteditable="true"></div>
				  		<button click.trigger="deleteItem($index,g[context][property])">X</button>
			  		</span>
			  		<span class="value" if.bind="item.type==='literal' && item.datatype.startsWith('xsd:gYear')" title="${item.value}">
			  			<input type="number" value.bind = "item.value"/><button click.trigger="deleteItem($index,g[context][property])">X</button>
			  		</span>
			  		<span class="value" if.bind="item.type==='literal' && item.datatype.startsWith('xsd:hexColor')" title="${item.value}">
			  			<input type="color" value.bind = "item.value"/><input type="string" value.bind="item.value"/><button click.trigger="deleteItem($index,g[context][property])">X</button>
			  		</span>
			  		<span class="value" if.bind="item.type==='literal' && item.datatype.startsWith('xsd:boolean')" title="${item.value}">
			  			<select value.bind="item.value">
			  				<option value="true">Yes</option>
			  				<option value="false">No</option>
			  			</select><button click.trigger="deleteItem($index,g[context][property])">X</button>
			  		</span>
			  	</div>
				<!--<button click.trigger = "addExistingPropertyValue(property)" repeat.for="cardinality of g[property]['property:hasCardinality']"
				 if.bind="cardinality.value === 'cardinality:_ZeroOrMore' || cardinality.value === 'cardinality:_OneOrMore'">+</button>-->
		    </div>
		  </div>
		</div>

	  <div class="list" if.bind="mode==='list'">
	  	<div class="type link" click.trigger="fetchContext(g[context]['rdf:type'][0].value,'list')">${g[g[context]['rdf:type'][0].value]['term:prefLabel'][0].value}</div>
		<div class="propertyContextLabel">${g[context]['term:prefLabel'][0].value}</div>	  	
	  <div class="tabs">
	     <div class="tab ${(predicate.curie === activeLinkPredicate)?'active':''}" repeat.for="predicate of predicates" click.trigger="activateTab(predicate.curie)"
	     if.bind="!(['rdfs:domain','rdfs:range','property:hasDomain','property:hasRange'].includes(predicate.curie))"
	     title="${predicate.curie}">
		   ${predicate.domainLabel } ${predicate.label} ${g[context].hasOwnProperty('class:hasPluralName')?g[context]['class:hasPluralName'][0].value:g[context]['term:prefLabel'][0].value}
		  </div>
	  </div>	  	
	  	<div class="listRefine">
	  		<input type="search" value.bind="qRefine" placeholder="Refine" input.delegate="activateTab(activeLinkPredicate,true,false)"/>
	  	</div>
	  	<div class="buttons">
	  	<div class="button" click.trigger="newCard()" if.bind="context.startsWith('class:') && userRole.has('accountRole:_Create')">New ${g[context]['term:prefLabel'][0].value}</div>
	  	<div class="button" click.trigger="newCard(g[context]['rdf:type'][0].value)" if.bind="(!context.startsWith('class:')) && userRole.has('accountRole:_Create')">New ${g[g[context]['rdf:type'][0].value]['term:prefLabel'][0].value}</div>	  	
	  	<div class="button" click.trigger="deleteClassItems()" if.bind="context.startsWith('class:') && userRole.has('accountRole:_Delete')  && (context != 'class:_Class') && (context != 'class:_Property')">Delete All Items In ${g[context]['term:prefLabel'][0].value}</div>
	    </div>
	  	<div>Item Count = ${itemCount}</div>
	  	<div class="sortField">
	  		<select value.bind="sortMode" change.delegate="sort()">
	  			<option repeat.for="sortModeState of sortModeStates" value.bind = "sortModeState.value">${sortModeState.label}</option>
	  		</select>
	  		<div class="button" click.trigger="reverse()">${reversed?"Drive":"Reverse"}</div>
	  	</div>
	  	<div class="pager"><span class="link" click.trigger="prevRefPage()">&#9664;</span> Page ${page + 1} of ${totalPages} <span class="link" click.trigger="nextRefPage()">&#9654;</span></div>
	  	<div class="constraintsBlock">
	  		<div class="buttons">
	  			<button click.trigger="newConstraint()" class="button">Add Constraint</button>
	  			<button click.trigger="clearConstraints()" class="button">Clear Constraints</button>
	  		</div>
	  		<div class="contraints">
	  			<div class="constraint property" repeat.for="constraint of constraints">
	  				<button click.trigger="removeConstraint($index)">X</button>
	  				<div class="constraintProperty label">&nbsp;${constraint.label}: &nbsp;</div>
	  				<div class="constraintValue value">${constraint.objectLabel}</div>
	  			</div>
	  		</div>
	  	</div>
	  	<div repeat.for="link of visibleLinks" class="linkContainer">
	  		<div class="link iconContainer"><div class="iconSubcontainer"><img src="${g[link]['term:hasPrimaryImageURL'][0].value}" if.bind="g[link].hasOwnProperty('term:hasPrimaryImageURL')" click.trigger="fetchContext(link)" class="linkImage"/></div><div  class="link colorIcon "
	  			if.bind="g[link].hasOwnProperty('color:hasColorHexValue')"
	  			 click.trigger="fetchContext(link)"
	  			css="background-color:${g[link]['color:hasColorHexValue'][0].value}">&nbsp;</div></div>
	  		<div class="linkMeta">
		  		<span click.trigger="fetchContext(link)" class="link"><span if.bind="g[link]['rdf:type'][0].value ==='class:_Property'">(${g[g[link]['rdfs:domain'][0].value]['term:prefLabel'][0].value}) </span>${g[link]['term:prefLabel'][0].value}.&nbsp;<span if.bind="g[link]['rdf:type'][0].value ==='class:_Property'">(<span>${g[g[link]['rdfs:range'][0].value]['term:prefLabel'][0].value}<span class="datatypeLink">${g[g[link]['property:hasDatatype'][0].value]['term:prefLabel'][0].value}</span></span>)</span></span>
		  		<!--<span class="link" click.trigger="fetchContext(g[link]['rdf:type'][0].value)" >[${g[g[link]['rdf:type'][0].value]['term:prefLabel'][0].value}]</span>-->
		  		[<span class="link" repeat.for="sType of g[link]['rdf:type']"  click.trigger="fetchContext(sType.value,'list')">
		  			${g[sType.value]['term:prefLabel'][0].value}<span if.bind="!$last">, </span></span>]
		  		<div class="linkDate">${displayLiteral(g[link]['term:hasLastModifiedDate'][0])}</div>
		  		<div class="linkDescription" innerHTML="${summaryFilter(g[link]['term:hasDescription'][0].value)}..."></div>
	  		</div>
	  	</div>
	  </div> 
 	  <iframe src="${server}/app/graphview/index.html?context=${context}" class="graph" id="graph"  if.bind="mode==='graph'"></iframe>
 	  
	  <div class="images" if.bind="mode==='images'">
	  <div class="tabs">
	     <div class="tab ${(predicate.curie === activeLinkPredicate)?'active':''}" repeat.for="predicate of predicates" click.trigger="activateTab(predicate.curie)"
	     if.bind="!(['rdfs:domain','rdfs:range','property:hasDomain','property:hasRange'].includes(predicate.curie))"
	     title="${predicate.curie}">
		   ${predicate.domainLabel } ${predicate.label} ${g[context].hasOwnProperty('class:hasPluralName')?g[context]['class:hasPluralName'][0].value:g[context]['term:prefLabel'][0].value}
		  </div>
	  </div>	  	
	  	
	  	<div class="listRefine">
	  		<input type="search" value.bind="qRefine" placeholder="Refine" input.delegate="activateTab(activeLinkPredicate,true,false)"/>
	  	</div>
	  	<div>Item Count = ${itemCount} <div class="button" click.trigger="reverse()">${reversed?"Drive":"Reverse"}</div></div>
	  	<div class="pager"><span class="link" click.trigger="prevRefPage()">&#9664;</span> Page ${page + 1} of ${totalPages} <span class="link" click.trigger="nextRefPage()">&#9654;</span></div>
	  	<div class="imageFrame">
	  	<div repeat.for="link of visibleLinks" class="imageContainer">
	  		<div class="imagesEntry">
	  		<img src="${g[link]['term:hasPrimaryImageURL'][0].value}" if.bind="g[link].hasOwnProperty('term:hasPrimaryImageURL')" click.trigger="fetchContext(link)" class="thumbImage"/>
	  		<div click.trigger="fetchContext(link)" class="link imageCaption">${g[link]['term:prefLabel'][0].value}.&nbsp;</div>
	  		</div>
	  		<!--<span class="linkDescription">${g[link]['term:hasDescription'][0].value}</span>
	  		<span class="link" click.trigger="fetchContext(g[link]['rdf:type'][0].value)">[${g[g[link]['rdf:type'][0].value]['term:prefLabel'][0].value}]</span>-->
	  	</div>
	  </div>
  </div> 	
  
   <div class="card"  if.bind="mode==='card' && cardEdit === false">

	<img class="cardImage" src="${g[context]['term:hasPrimaryImageURL'][0].value}" if.bind="g[context]['term:hasPrimaryImageURL']"/>
	<div class="largeColorSwatch" css="background-color:${g[context]['color:hasColorHexValue'][0].value}" if.bind="g[context].hasOwnProperty('color:hasColorHexValue')">&nbsp;</div> 
  	<div class="type link" click.trigger="fetchContext(g[context]['rdf:type'][0].value,'list')">${g[g[context]['rdf:type'][0].value]['term:prefLabel'][0].value}</div>
	<h1>${g[context]['term:prefLabel'][0].value}</h1>
	<div class="buttons">
	    <div class="button" click.trigger="newCard()" if.bind="context.startsWith('class:') && userRole.has('accountRole:_Create')">New ${g[context]['term:prefLabel'][0].value}</div>
	    <!--<div class="button" click.trigger="newCard(g[context]['rdf:type'][0].value)" if.bind="!context.startsWith('class:')">New ${g[g[context]['rdf:type'][0].value]['term:prefLabel'][0].value}</div>-->
		<div class="button" click.trigger="editCard('edit')" if.bind="userRole.has('accountRole:_Edit')">Edit</div>
		<div class="button" click.trigger="editCard('duplicate')" if.bind="userRole.has('accountRole:_Edit')">Duplicate</div>
		<div class="button" click.trigger="deleteCard()" if.bind="userRole.has('accountRole:_Delete') && (context != 'class:_Class') && (context != 'class:_Property')">Delete</div>
		<!--<div class="button" click.trigger="launchPage()">External</div>-->
	</div>
	<div class="description  expanded">
		<div class="bodyDisplay" repeat.for="descrKey of ['term:hasDescription']" innerHTML="${filterBody(g[context][descrKey][0].value)}"></div>
		<div class="aboutAuthor"> </div>
	</div>
  </div>

  <div class="card"  if.bind="mode==='card' && cardEdit === true">	
	<div class="buttons">
		<div class="button" click.trigger="saveCardProperties()">Save</div>
		<div class="button" click.trigger="revertCard()">Revert</div>
	</div>
	<div class="cardTitle" innerhtml.two-way="activeCard.title" if.bind="editMode === 'duplicate'" contenteditable="true" input.delegate="generateEntityId(context)"></div>
	<div class="cardTitle" innerhtml.two-way="activeCard.title"  if.bind="editMode === 'edit'" contenteditable="true"></div>
	<div class="property"  if.bind="editMode === 'duplicate'" >
		<div class="dlg-label">Curie</div>
		<div class="curie" contenteditable="true"  innerhtml.two-way="activeCard.curie" placeholder="Condensed URI or Curie"></div>
	</div>
	<img class="cardImage" src="${activeCard.image}"/>
	<div><span class="label">Image URL: </span><input value.two-way="activeCard.image" class="primaryImageEditField longInput"/>
		<input type="file" change.trigger="setImage($event)"/>
	</div>
	<div class="editorButtons">
		<button><img class="intLink" title="Undo" click.trigger="formatDoc('undo')" src="data:image/gif;base64,R0lGODlhFgAWAOMKADljwliE33mOrpGjuYKl8aezxqPD+7/I19DV3NHa7P///////////////////////yH5BAEKAA8ALAAAAAAWABYAAARR8MlJq7046807TkaYeJJBnES4EeUJvIGapWYAC0CsocQ7SDlWJkAkCA6ToMYWIARGQF3mRQVIEjkkSVLIbSfEwhdRIH4fh/DZMICe3/C4nBQBADs=" /></button>
		<button><img class="intLink" title="Redo" click.trigger="formatDoc('redo')" src="data:image/gif;base64,R0lGODlhFgAWAMIHAB1ChDljwl9vj1iE34Kl8aPD+7/I1////yH5BAEKAAcALAAAAAAWABYAAANKeLrc/jDKSesyphi7SiEgsVXZEATDICqBVJjpqWZt9NaEDNbQK1wCQsxlYnxMAImhyDoFAElJasRRvAZVRqqQXUy7Cgx4TC6bswkAOw==" /></button>
		<button><img class="intLink" title="Remove formatting" click.trigger="formatDoc('removeFormat')" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAABGdBTUEAALGPC/xhBQAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAAd0SU1FB9oECQMCKPI8CIIAAAAIdEVYdENvbW1lbnQA9syWvwAAAuhJREFUOMtjYBgFxAB501ZWBvVaL2nHnlmk6mXCJbF69zU+Hz/9fB5O1lx+bg45qhl8/fYr5it3XrP/YWTUvvvk3VeqGXz70TvbJy8+Wv39+2/Hz19/mGwjZzuTYjALuoBv9jImaXHeyD3H7kU8fPj2ICML8z92dlbtMzdeiG3fco7J08foH1kurkm3E9iw54YvKwuTuom+LPt/BgbWf3//sf37/1/c02cCG1lB8f//f95DZx74MTMzshhoSm6szrQ/a6Ir/Z2RkfEjBxuLYFpDiDi6Af///2ckaHBp7+7wmavP5n76+P2ClrLIYl8H9W36auJCbCxM4szMTJac7Kza////R3H1w2cfWAgafPbqs5g7D95++/P1B4+ECK8tAwMDw/1H7159+/7r7ZcvPz4fOHbzEwMDwx8GBgaGnNatfHZx8zqrJ+4VJBh5CQEGOySEua/v3n7hXmqI8WUGBgYGL3vVG7fuPK3i5GD9/fja7ZsMDAzMG/Ze52mZeSj4yu1XEq/ff7W5dvfVAS1lsXc4Db7z8C3r8p7Qjf///2dnZGxlqJuyr3rPqQd/Hhyu7oSpYWScylDQsd3kzvnH738wMDzj5GBN1VIWW4c3KDon7VOvm7S3paB9u5qsU5/x5KUnlY+eexQbkLNsErK61+++VnAJcfkyMTIwffj0QwZbJDKjcETs1Y8evyd48toz8y/ffzv//vPP4veffxpX77z6l5JewHPu8MqTDAwMDLzyrjb/mZm0JcT5Lj+89+Ybm6zz95oMh7s4XbygN3Sluq4Mj5K8iKMgP4f0////fv77//8nLy+7MCcXmyYDAwODS9jM9tcvPypd35pne3ljdjvj26+H2dhYpuENikgfvQeXNmSl3tqepxXsqhXPyc666s+fv1fMdKR3TK72zpix8nTc7bdfhfkEeVbC9KhbK/9iYWHiErbu6MWbY/7//8/4//9/pgOnH6jGVazvFDRtq2VgiBIZrUTIBgCk+ivHvuEKwAAAAABJRU5ErkJggg=="/></button>
		<button><img class="intLink" title="Bold" click.trigger="formatDoc('bold')" src="data:image/gif;base64,R0lGODlhFgAWAID/AMDAwAAAACH5BAEAAAAALAAAAAAWABYAQAInhI+pa+H9mJy0LhdgtrxzDG5WGFVk6aXqyk6Y9kXvKKNuLbb6zgMFADs=" /></button>
		<button><img class="intLink" title="Italic" click.trigger="formatDoc('italic')" src="data:image/gif;base64,R0lGODlhFgAWAKEDAAAAAF9vj5WIbf///yH5BAEAAAMALAAAAAAWABYAAAIjnI+py+0Po5x0gXvruEKHrF2BB1YiCWgbMFIYpsbyTNd2UwAAOw==" /></button>
		<button><img class="intLink" title="Underline" click.trigger="formatDoc('underline')" src="data:image/gif;base64,R0lGODlhFgAWAKECAAAAAF9vj////////yH5BAEAAAIALAAAAAAWABYAAAIrlI+py+0Po5zUgAsEzvEeL4Ea15EiJJ5PSqJmuwKBEKgxVuXWtun+DwxCCgA7" /></button>
		<button><img class="intLink" title="Left align" click.trigger="formatDoc('justifyleft')" src="data:image/gif;base64,R0lGODlhFgAWAID/AMDAwAAAACH5BAEAAAAALAAAAAAWABYAQAIghI+py+0Po5y02ouz3jL4D4JMGELkGYxo+qzl4nKyXAAAOw==" /></button>
		<button><img class="intLink" title="Center align" click.trigger="formatDoc('justifycenter')" src="data:image/gif;base64,R0lGODlhFgAWAID/AMDAwAAAACH5BAEAAAAALAAAAAAWABYAQAIfhI+py+0Po5y02ouz3jL4D4JOGI7kaZ5Bqn4sycVbAQA7" /></button>
		<button><img class="intLink" title="Right align" click.trigger="formatDoc('justifyright')" src="data:image/gif;base64,R0lGODlhFgAWAID/AMDAwAAAACH5BAEAAAAALAAAAAAWABYAQAIghI+py+0Po5y02ouz3jL4D4JQGDLkGYxouqzl43JyVgAAOw==" /></button>
		<button><img class="intLink" title="Numbered list" click.trigger="formatDoc('insertorderedlist')" src="data:image/gif;base64,R0lGODlhFgAWAMIGAAAAADljwliE35GjuaezxtHa7P///////yH5BAEAAAcALAAAAAAWABYAAAM2eLrc/jDKSespwjoRFvggCBUBoTFBeq6QIAysQnRHaEOzyaZ07Lu9lUBnC0UGQU1K52s6n5oEADs=" /></button>
		<button><img class="intLink" title="Dotted list" click.trigger="formatDoc('insertunorderedlist')" src="data:image/gif;base64,R0lGODlhFgAWAMIGAAAAAB1ChF9vj1iE33mOrqezxv///////yH5BAEAAAcALAAAAAAWABYAAAMyeLrc/jDKSesppNhGRlBAKIZRERBbqm6YtnbfMY7lud64UwiuKnigGQliQuWOyKQykgAAOw==" /></button>
		<button><img class="intLink" title="Quote" click.trigger="formatDoc('formatblock','blockquote')" src="data:image/gif;base64,R0lGODlhFgAWAIQXAC1NqjFRjkBgmT9nqUJnsk9xrFJ7u2R9qmKBt1iGzHmOrm6Sz4OXw3Odz4Cl2ZSnw6KxyqO306K63bG70bTB0rDI3bvI4P///////////////////////////////////yH5BAEKAB8ALAAAAAAWABYAAAVP4CeOZGmeaKqubEs2CekkErvEI1zZuOgYFlakECEZFi0GgTGKEBATFmJAVXweVOoKEQgABB9IQDCmrLpjETrQQlhHjINrTq/b7/i8fp8PAQA7" /></button>
		<button><img class="intLink" title="Add indentation" click.trigger="formatDoc('outdent')" src="data:image/gif;base64,R0lGODlhFgAWAMIHAAAAADljwliE35GjuaezxtDV3NHa7P///yH5BAEAAAcALAAAAAAWABYAAAM2eLrc/jDKCQG9F2i7u8agQgyK1z2EIBil+TWqEMxhMczsYVJ3e4ahk+sFnAgtxSQDqWw6n5cEADs=" /></button>
		<button><img class="intLink" title="Delete indentation" click.trigger="formatDoc('indent')" src="data:image/gif;base64,R0lGODlhFgAWAOMIAAAAADljwl9vj1iE35GjuaezxtDV3NHa7P///////////////////////////////yH5BAEAAAgALAAAAAAWABYAAAQ7EMlJq704650B/x8gemMpgugwHJNZXodKsO5oqUOgo5KhBwWESyMQsCRDHu9VOyk5TM9zSpFSr9gsJwIAOw==" /></button>
		<button><img class="intLink" title="Hyperlink" click.trigger="createHyperlink()" src="data:image/gif;base64,R0lGODlhFgAWAOMKAB1ChDRLY19vj3mOrpGjuaezxrCztb/I19Ha7Pv8/f///////////////////////yH5BAEKAA8ALAAAAAAWABYAAARY8MlJq7046827/2BYIQVhHg9pEgVGIklyDEUBy/RlE4FQF4dCj2AQXAiJQDCWQCAEBwIioEMQBgSAFhDAGghGi9XgHAhMNoSZgJkJei33UESv2+/4vD4TAQA7" /></button>
		<button><img class="intLink" title="Cut" click.trigger="formatDoc('cut')" src="data:image/gif;base64,R0lGODlhFgAWAIQSAB1ChBFNsRJTySJYwjljwkxwl19vj1dusYODhl6MnHmOrpqbmpGjuaezxrCztcDCxL/I18rL1P///////////////////////////////////////////////////////yH5BAEAAB8ALAAAAAAWABYAAAVu4CeOZGmeaKqubDs6TNnEbGNApNG0kbGMi5trwcA9GArXh+FAfBAw5UexUDAQESkRsfhJPwaH4YsEGAAJGisRGAQY7UCC9ZAXBB+74LGCRxIEHwAHdWooDgGJcwpxDisQBQRjIgkDCVlfmZqbmiEAOw==" /></button>
		<button><img class="intLink" title="Copy" click.trigger="formatDoc('copy')" src="data:image/gif;base64,R0lGODlhFgAWAIQcAB1ChBFNsTRLYyJYwjljwl9vj1iE31iGzF6MnHWX9HOdz5GjuYCl2YKl8ZOt4qezxqK63aK/9KPD+7DI3b/I17LM/MrL1MLY9NHa7OPs++bx/Pv8/f///////////////yH5BAEAAB8ALAAAAAAWABYAAAWG4CeOZGmeaKqubOum1SQ/kPVOW749BeVSus2CgrCxHptLBbOQxCSNCCaF1GUqwQbBd0JGJAyGJJiobE+LnCaDcXAaEoxhQACgNw0FQx9kP+wmaRgYFBQNeAoGihCAJQsCkJAKOhgXEw8BLQYciooHf5o7EA+kC40qBKkAAAGrpy+wsbKzIiEAOw==" /></button>
		<button><img class="intLink" title="Paste" click.trigger="formatDoc('paste')" src="data:image/gif;base64,R0lGODlhFgAWAIQUAD04KTRLY2tXQF9vj414WZWIbXmOrpqbmpGjudClFaezxsa0cb/I1+3YitHa7PrkIPHvbuPs+/fvrvv8/f///////////////////////////////////////////////yH5BAEAAB8ALAAAAAAWABYAAAWN4CeOZGmeaKqubGsusPvBSyFJjVDs6nJLB0khR4AkBCmfsCGBQAoCwjF5gwquVykSFbwZE+AwIBV0GhFog2EwIDchjwRiQo9E2Fx4XD5R+B0DDAEnBXBhBhN2DgwDAQFjJYVhCQYRfgoIDGiQJAWTCQMRiwwMfgicnVcAAAMOaK+bLAOrtLUyt7i5uiUhADs=" /></button>
		<button click.trigger="formatDoc('unlink')">Unlink</button>
		<button click.trigger="imageEdit()">Image</button>
		<button click.trigger="formatDoc('removeFormat')">Unformat</button>
		<input type="color" value="#ff0000" input.trigger="setForeColor($event)" alt="ForeColor"></input>
		<input type="color" value="#ffffff" input.trigger="setBackColor($event)" alt="BackColor"></input>
		<select value="" input.trigger="setHeading($event)">
			<option value="" disabled="disabled" selected="selected">Select Heading</option>
            <option value="h1">Heading 1</option>
            <option value="h2">Heading 2</option>
            <option value="h3">Heading 3</option>
            <option value="h4">Heading 4</option>
            <option value="p">Paragraph</option>
            <option value="pre">Code</option>
		</select> 
		<button click.trigger="formatDoc('insertHorizontalRule')">&lt;HR&gt;</button>
		<button click.trigger="insertTermDlg()">Insert Term</button>
	</div>
<!--	<div><button click.trigger="displayFullBody = true" if.bind="!displayFullBody">Expand</button><button click.trigger="displayFullBody = false" if.bind="displayFullBody">Collapse</button></div>-->
	<div class="description expanded">
		<div class="bodyEditor" innerhtml.two-way="activeCard.body" contenteditable="true"></div>
	</div>
 </div>


 <div class="namespaces card" if.bind="mode==='namespaces'">
 		<h1 class="subhead">Namespaces</h1>

 		<table>
 		<tr>
 			<th>Prefix</th>
 			<th>Namespace</th>
 		</tr>	
 		<tr class="property" repeat.for="prefix of ns | sortedObjectKeys">
 			<td class="inlineLabel">${prefix}</td>
 			<td class="inlineValue">${ns[prefix]}></td>
 		</tr>
 		</table>
 </div>

	<div class="compliance card"  if.bind="mode==='compliance'">
		<h1>Compliance: ${g[context]['term:prefLabel'][0].value}</h1>
		<div class="property">
			<div class="label">For Country:</div>
			<div class="value"><select value.bind="complianceItem.country"
				change.delegate="filterComplianceTest()">>
				<option value="" disabled="disabled">Select the compliance country</option>
				<option value="country:_UnitedStates">United States</option>
				<option value="country:_EuropeanUnion">European Union</option>
				<option value.bind="item.curie" repeat.for="item of instanceList['class:_Country']['rdf:type']">${item.label}</option>
			</select></div>
		</div>
		<div class="property">
			<div class="label">Industry Use:</div>
			<div class="value"><select value.bind="complianceItem.industry"
				change.delegate="filterComplianceTest()">
				<option value="" disabled="disabled">Select the industry use.</option>
				<option value.bind="item.curie" repeat.for="item of instanceList['class:_Industry']['rdf:type']">${item.label}</option>
			</select></div>
			<div class="description" innerhtml.bind="getDescription(complianceItem.industry,'class:_Industry','rdf:type')"></div>
		</div>
		<div class="property">
			<div class="label">Compliance Test:</div>
			<div class="value"><select value.bind="complianceItem.complianceTest"  if.bind="instanceList['class:_ComplianceTest']['rdf:type'].length > 0">
				<option value="" disabled="disabled">Select the compliance test.</option>
				<option value.bind="item.curie" repeat.for="item of instanceList['class:_ComplianceTest']['rdf:type']">${item.label}</option>
			</select>
		</div>
		<div class="description" innerhtml.bind="getDescription(complianceItem.complianceTest,'class:_ComplianceTest','rdf:type')"
		 if.bind="instanceList['class:_ComplianceTest']['rdf:type'].length > 0" ></div>
		<div class="description" if.bind="instanceList['class:_ComplianceTest']['rdf:type'].length === 0" innerhtml.two-way="complianceItem.noItemsMessage"></div>
		<hr/>
		</div>
		<div class="property">
			<div class="label">Strain:</div>
			<div class="value"><select value.bind="complianceItem.strain"
				 change.delegate="updateInstanceList($event.target.value,'enzymeActivity:hasStrain')">
				<option value="" disabled="disabled">Select the strain.</option>
				<option value.bind="item.curie" repeat.for="item of instanceList['class:_Strain']['rdf:type']">${item.label}</option>
			</select></div>
		</div>
		<div class="property" if.bind="complianceItem.strain != ''">
			<div class="label">Enzyme Activity:</div>
			<div class="value"><select value.bind="complianceItem.enzyme"
				click.trigger="updateInstanceList($event.target.value,'grainProduct:hasEnzymeActivity')"
				change.delegate="updateInstanceList($event.target.value,'grainProduct:hasEnzymeActivity')">
				<option value="" disabled="disabled">Select the enzyme</option>
				<option value.bind="item.curie" selected="selected" repeat.for="item of instanceList[complianceItem.strain]['enzymeActivity:hasStrain']||[]">${item.label}</option>
			</select></div>

		</div>
		<div class="property" if.bind="complianceItem.enzyme != ''">
			<div class="label">Product:</div>
			<div class="value"><select value.bind="complianceItem.product">
				<option value.bind="item.curie" selected="selected" repeat.for="item of instanceList[complianceItem.enzyme]['grainProduct:hasEnzymeActivity']||[]">${item.label}</option>
			</select></div>
			
		</div>
	</div>


 <div class="ingestion card" if.bind="mode==='ingestion'">
 	<h1>Ingestion</h1>
 	<h2 class="subhead">Properties</h2>
 	<div repeat.for="sheet of templates | objectKeys" class="sheet">
 		<div class="sheetName">Worksheet '${sheet}'</div>
 		<div class="ingest property"><span class="label">Namespace:</span> <span class="value">${templates[sheet].uri}</span></div>
 		<details>
 			<summary>Sheet Properties</summary>
 			<div class="sheetProperty" repeat.for="sheetProperty of templates[sheet].headers">{{${sheetProperty}}}</div>
 		</details>
 		<div class="property">
 		<div class="label">Template</div>
 			<textarea value.bind="templates[sheet].template"></textarea>
 		</div>
 	</div>
 </div>
 <div class="search card" if.bind="mode==='search'">
 	<h1>Search</h1>
 	<p>${searchData.count} ${searchData.count === 1?'item':'items'} found.</p>
	<div repeat.for="item of searchData.results" class="searchItems" >
		<div class="searchItem link" click.trigger="fetchContext(item.s)">
		<img src="${item.imageURL}" class="imageThumbnail"/>
		<div>${item.prefLabel} [${item.sTypeLabel}]</div>
		</div>
	</div> 	
 </div>
  
 <div class="sparql card" if.bind="mode==='sparql'">
 	<h1>SPARQL Query Page</h1>
 	<p>This is the future home of the SPARQL query page.</p>
 </div>

  
  <modal view-model.ref="newModal" closed.delegate="processNewCard()" class="newModal">
  	<div class="dlg-label">Title of Card</div>
    <div slot="header">
      <b>New ${g[context]['term:prefLabel'][0].value}</b>
    </div>
    <div class="cardTitleEdit"><input value.bind="activeCard.title" input.delegate="generateEntityId(context)"/></div>
	<img class="cardImage" src="${activeCard.image}"/>
	<div><span class="label">Image URL: </span><input value.bind="activeCard.image" class="primaryImageEditField longInput"/>
		<input type="file" change.trigger="setImage($event)"/>
	</div> 
  	<div class="dlg-label">Body</div>
	<div class="bodyEditor newModalBE" innerhtml.two-way="activeCard.body" contenteditable="true"></div>
	<div class="dlg-property"  if.bind="context === 'class:_Class'">
		<div class="dlg-label">Prefix</div>
		<div class="prefix" contenteditable="true"  innerhtml.two-way="activeCard.prefix" input.delegate="updateClassNamespace()" placeholder="Prefix"></div>
		<div class="dlg-label">Namespace</div>
		<div class="namespace" contenteditable="true"  innerhtml.two-way="activeCard.namespace" if.bind="context === 'class:_Class'" placeholder="Namespace"></div>
		<div class="dlg-label">Plural Form</div>
		<div class="namespace" contenteditable="true"  innerhtml.two-way="activeCard.plural" if.bind="context === 'class:_Class'" placeholder="Plural Form"></div>
	</div>
	<div class="dlg-property"  if.bind="context === 'class:_Property'">
		<div class="property">
			<div class="dlg-label">Domain: <select value.bind="activeCard.domain" change.delegate="generateEntityId(context)">
				<option value.bind="link.curie" repeat.for="link of instanceList['class:_Class']['rdf:type']">${link.label}</option>
			</select></div>
		</div>
		<div class="dlg-label">Node Kind: <select value.bind="activeCard.nodeKind">
				<option value="" disabled="disabled">Choose whether the target is an attribute or an object.</option>
				<option value="nodeKind:_Literal">Attribute</option>
				<option value="nodeKind:_IRI">Object</option>
			</select></div>
		<div class="property" if.bind="activeCard.nodeKind==='nodeKind:_IRI'">
			<div class="dlg-label">Range: <select value.bind="activeCard.range">
				<option value.bind="link.curie" repeat.for="link of instanceList['class:_Class']['rdf:type']">${link.label}</option>
			</select></div>
		</div>
		<div class="property" if.bind="activeCard.nodeKind==='nodeKind:_Literal'" >
			<div class="dlg-label">Datatype: <select value.bind="activeCard.datatype">
				<option value.bind="link.curie" repeat.for="link of instanceList['class:_XSD']['rdf:type']">${link.label}</option>
			</select></div>
		</div>
		<div class="property">
			<div class="dlg-label">Cardinality: <select value.bind="activeCard.cardinality">
				<option value="" disabled="disabled">Select Cardinality</option>
				<option value.bind="link.curie" repeat.for="link of instanceList['class:_Cardinality']['rdf:type']">${link.label}</option>
			</select></div>
		</div>
	</div>
	<div class="property">
		<div class="dlg-label">Curie</div>
		<div class="curie" contenteditable="true"  innerhtml.two-way="activeCard.curie" placeholder="Condensed URI or Curie"></div>
	</div>
	<div slot="footer">
		<div class="button" click.trigger="newModal.close()">Create</div>
		<div class="button" click.trigger="newModal.cancel()">Cancel</div>
	</div>
  </modal>

  <modal view-model.ref="duplicateModal" closed.delegate="processDuplicateCard()">
    <div slot="header">
      <b>New ${g[context]['term:prefLabel'][0].value}</b>
    </div>
	<h2 innerhtml.two-way="activeCard.title" contenteditable="true" input.delegate="generateEntityId(context)"></h2>
	<img class="cardImage" src="${activeCard.image}"/>
	<div><span class="label">Image URL: </span><input value.two-way="activeCard.image" class="primaryImageEditField longInput"/></div> 
	<div class="bodyEditor duplicateModalBE" innerhtml.two-way="activeCard.body" contenteditable="true"></div>
	<div class="curie" innerhtml.two-way="activeCard.curie" contenteditable="true"></div>
	<div slot="footer">
		<div class="button" click.trigger="duplicateModal.close()">Save</div>
		<div class="button" click.trigger="duplicateModal.cancel()">Cancel</div>
	</div>
  </modal>

  <modal view-model.ref="addPropertyModal" closed.delegate="processAddProperty()">
    <div slot="header"></div>
    <div>
      <h3>Add property</h3>
		<div class="property">
			<div class="dlg-label">Select Property: <select value.bind="this.activeProperty" change.delegate="activePropertySelected($event)">
				<option value="">None Selected</option>
				<option value.bind="property.predicate" repeat.for="property of availableProperties">${property.label}</option>
			</select></div>
		</div>
		<div class="property" if.bind="activeProperty.nodeKind === 'nodeKind:_IRI'">
			<div class="dlg-label">Select Value: <select value.bind="activeProperty.value">
				<option value="">None Selected</option>
				<option value.bind="value.curie" repeat.for="value of activePropertyValues">${value.label}</option>
			</select>
		</div>
		</div>
		<div class="property" if.bind="activeProperty.nodeKind === 'nodeKind:_Literal' && activeProperty.datatype ==='xsd:string'" >
			<div class="dlg-label">Value:</div>
			<div class="dlg-value"><input value.bind="activeProperty.value"/></div>
		</div>
		<div class="property" if.bind="activeProperty.nodeKind === 'nodeKind:_Literal' && ((activeProperty.datatype === 'xsd:integer') ||  (activeProperty.datatype === 'xsd:double') || (activeProperty.datatype === 'xsd:float'))" >
			<div class="dlg-label">Value:</div>
			<div class="dlg-value"><input value.bind="activeProperty.value" type="number"/></div>
		</div>
		<div class="property" if.bind="activeProperty.nodeKind === 'nodeKind:_Literal' && (activeProperty.datatype === 'xsd:currency_usd')" >
			<div class="dlg-label">Value:</div>
			<div class="dlg-value"><input value.bind="activeProperty.value" type="number"/></div>
		</div>
		<div class="property" if.bind="activeProperty.nodeKind === 'nodeKind:_Literal' && activeProperty.datatype ==='xsd:imageURL'" >
			<div class="dlg-label">Paste in Image URL:</div>
		    <img src.bind="activeProperty.value" class="imageMedium"/> 
			<div class="dlg-value"><input type="text" value.bind = "activeProperty.value" class="longInput"/>
				</div>
		</div>
		<div class="property" if.bind="activeProperty.nodeKind === 'nodeKind:_Literal' && activeProperty.datatype ==='xsd:htmlLiteral'" >
			<div class="dlg-label">HTML Content:</div>
			<div class="dlg-value" innerhtml.two-way="activeProperty.value" contenteditable="true"></div>
		</div>
		<div class="property" if.bind="activeProperty.nodeKind === 'nodeKind:_Literal' && (activeProperty.datatype === 'xsd:hexColor')" >
			<div class="dlg-label">Value:</div>
			<div class="dlg-value"><input value.bind="activeProperty.value" type="color"/></div>
		</div>

    </div>
	<div slot="footer">
		<div class="button" click.trigger="addPropertyModal.close()">Save</div>
		<div class="button" click.trigger="addPropertyModal.cancel()">Cancel</div>
	</div>
  </modal>

  <modal view-model.ref="addConstraintModal" closed.delegate="processAddConstraint()">
    <div slot="header"></div>
    <div>
      <h3>Add Constraint</h3>
		<div class="property">
			<div class="dlg-label">Select Property: <select value.bind="this.activeProperty" change.delegate="activePropertySelected($event)">
				<option value="">None Selected</option>
				<option value.bind="property.predicate" repeat.for="property of availableProperties" if.bind="property.nodeKind === 'nodeKind:_IRI'">${property.label}</option>
			</select></div>
		</div>
		<div class="property" if.bind="activeProperty.nodeKind === 'nodeKind:_IRI'">
			<div class="dlg-label">Select Value: <select value.bind="activeProperty.value">
				<option value="">None Selected</option>
				<option value.bind="value.curie" repeat.for="value of activePropertyValues">${value.label}</option>
			</select>
		</div>
		</div>
    </div>
	<div slot="footer">
		<div class="button" click.trigger="addConstraintModal.close()">Save</div>
		<div class="button" click.trigger="addConstraintModal.cancel()">Cancel</div>
	</div>
  </modal>

  <modal view-model.ref="insertTermModal" closed.delegate="insertTerm()" canceled.delegate="cancelInsertTerm()">
    <div slot="header"></div>
    <div>
      <h3>Insert Term</h3>
			<!--  change.delegate="activeClassSelected($event)" -->
		<div class="property">
			<div class="dlg-label">Search:</div>
			<div class="dlg-value"><input value.bind="q" type="text" input.delegate="inputSearch()"/></div>
		</div>
		<div class="property">
			<select class="inputSearchList" value.bind="insertTermObj.value">
				<div class="dlg-label">Link:</div>
				<option class="inputSearchItem link" value.bind="searchItem.s" repeat.for="searchItem of searchData.results" if.bind="$index<10">${searchItem.prefLabel}</option>
			</select>
		</div>
		<div class="property">
			<div class="dlg-label">Label:</div>
			<div class="dlg-value"><input value.bind="insertTermObj.temp" type="text"/><div class="button" click.trigger="updateInsertTerm()">Use Term Label</div></div>
		</div>
    </div>
	<div slot="footer">
		<div class="button" click.trigger="insertTermModal.close()">Insert</div>
		<div class="button" click.trigger="insertTermModal.cancel()">Cancel</div>
	</div>
  </modal>



    <modal view-model.ref="editImageModal" closed.delegate="processEditImage()">
    <div slot="header">
      <h3>Insert Image</h3>
    </div>
    <div slot="body">
		<div class="property">
			<div class="dlg-label">Image URL:</div>
			<div class="dlg-value"><input value.bind="editImage.src" class="longInput"/></div>
		</div>
		<div class="property">
			<div class="dlg-label">Width:</div>
			<div class="dlg-value"><input value.bind="editImage.width"/></div>
		</div>
		<div class="property">
			<div class="dlg-label">Height:</div>
			<div class="dlg-value"><input value.bind="editImage.height"/></div>
		</div>
		<div class="property">
			<div class="dlg-label">Alt Text:</div>
			<div class="dlg-value"><input value.bind="editImage.alt" class="longInput"/></div>
		</div>
		<div class="property">
			<div class="dlg-label">Title:</div>
			<div class="dlg-value"><input value.bind="editImage.title" class="longInput"/></div>
		</div>

		<div class="property">
			<div class="dlg-label">Alignment:</div>
			<div class="dlg-value"><select value.bind="editImage.align">
				<option value="">None</option>
				<option value="float:left;padding-right:5pt;padding-bottom:5pt;">Left</option>
				<option value="float:right;padding-left:5pt;padding-bottom:5pt;">Right</option>
				<option value="vertical-align:top;padding-bottom:5pt;">Top</option>
				<option value="vertical-align:middle;padding-bottom:5pt;">Middle</option>
				<option value="vertical-align:bottom;padding-bottom:5pt;">Bottom</option>
			</select></div>
		</div>

    </div>
	<div slot="footer">
		<div class="button" click.trigger="editImageModal.close()">Insert</div>
		<div class="button" click.trigger="cancelEditImage()">Cancel</div>
	</div>
  </modal>
  </div>
</div>
  <div class="rightPane">	
	<div class="sideProperties">
		<div class="propertyContextLabel">${g[context]['term:prefLabel'][0].value}</div>
		<div class="property" repeat.for="property of keys(g[context], ['rdf:type','term:prefLabel','term:hasPrimaryImageURL','term:hasDescription','vehicle:hasOptions','term:inGlossary','vehicle:hasVehicleComments', 
		'term:hasIdentifier','term:hasSearchable'])">
		  	<div class="label" title="${property}" click.trigger="fetchContext(property)"
             
		  	>${titleCase((g[property]['term:prefLabel'])?g[property]['term:prefLabel'][0].value:property)}:&nbsp;</div>
		  	<div class="valueBlock">
			  	<div class="value" repeat.for="item of wrapArray(g[context][property])">
			  		<span class="link" if.bind="item.type==='uri'" click.trigger="fetchContext(item.value)">${g[item.value]['term:prefLabel'][0].value}<span if.bind="!$last">,&nbsp;</span>
			  		</span>
			  		<span class="value" if.bind="item.type==='literal'" title="${item.datatype}"><span innerhtml="${displayLiteral(item)}"></span> 
			  			<span class="link" click.trigger="fetchContext(item.datatype)" if.bind="g[item.datatype]['term:prefLabel'].length > 0 ">&nbsp;[${g[item.datatype]["term:prefLabel"][0].value}]</span><span if.bind="!$last && $index != 0">, </span>
			  		</span>
			  	</div>
		    </div>
		  </div>
<!--		  <div class="property">
			  <div class="label">Namespace</div>
			  <div class="namespace">${namespace}</div>
		  </div>-->
		  <div class="property">
			  <div class="label">Has Curie</div>
	 	      <div click.trigger="fetchContext(context)" class="link">${context}</div>
		</div>
	 </div>
  </div>
</div>
  <div class="footer">
  	<div class="copyright">Copyright 2019 Semantical LLC.</div>
  </div>

</div>
	<modal view-model.ref="loginModal" closed.delegate="processLogin()">
    <div slot="header">Log In</div>
    <div>
		<div class="property">
			<div class="dlg-label">Username</div>
			<div class="dlg-value"><input value.bind="loginData.username" type="input"/></div>
		</div>
		<div class="property">
			<div class="dlg-label">Password</div>
			<div class="dlg-value"><input value.bind="loginData.password" type="password"/></div>
		</div>
    </div>
	<div slot="footer">
		<div class="button" click.trigger="loginModal.close()">Log in</div>
		<div class="button" click.trigger="loginModal.cancel()">Cancel</div>
	</div>
  </modal>
</template>



